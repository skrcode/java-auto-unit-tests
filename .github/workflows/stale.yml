name: Mark stale issues and pull requests

on:
  schedule:
    - cron: '0 0 * * *' # Run daily at midnight UTC

permissions:
  issues: write
  pull-requests: write

jobs:
  stale:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/stale@v9
        with:
          repo-token: ${{ secrets.GITHUB_TOKEN }}

          # Issue settings
          stale-issue-message: |
            This issue has been automatically marked as stale because it has not had recent activity.
            It will be closed in 7 days if no further activity occurs.

            If this is still relevant, please:
            - Comment on this issue
            - Provide additional information
            - Update the issue with current status

            Thank you for your contribution!

          close-issue-message: |
            This issue was automatically closed due to inactivity.
            If you believe this is still relevant, please reopen with updated information.

          days-before-stale: 60
          days-before-close: 7
          stale-issue-label: 'stale'
          exempt-issue-labels: 'pinned,security,good first issue,help wanted,enhancement'

          # Pull request settings
          stale-pr-message: |
            This pull request has been automatically marked as stale because it has not had recent activity.
            It will be closed in 14 days if no further activity occurs.

            If you plan to continue work on this:
            - Update the PR with new commits
            - Respond to review comments
            - Rebase on the latest main branch

            Thank you for your contribution!

          close-pr-message: |
            This pull request was automatically closed due to inactivity.
            Feel free to reopen if you'd like to continue this work.

          days-before-pr-stale: 45
          days-before-pr-close: 14
          stale-pr-label: 'stale'
          exempt-pr-labels: 'pinned,security,in progress'

          # General settings
          operations-per-run: 100
          remove-stale-when-updated: true
          ascending: true
